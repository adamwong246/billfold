<head>
  <title>billFold</title>
</head>

<body>
  <div id="outer">
    {{> grid }}
  </div>
</body>

<template name="grid">
  <table class="grid">
    <tr>
      <td></td>
      {{#each roommates}}
        <td>
          {{> roommate}}
        </td>
      {{/each}}

      <td>
        <form class="new_roommate">
          <input type="text" name="name" placeholder="name" />
          <input type="date" name="arrival_date"/>
          <input type="date" name="departure_date"/>
          <input type="submit" value="New roommmate">
        </form>
      </td>

    </tr>

    {{#each bills}}
      <tr>
        <td>
          {{> bill}}  
        </td>
        {{#each roommates}}
          <td>
            {{../name}}
            {{name}}
          </td>
        {{/each}}
      </tr>
    {{/each}}

    <tr>
      <td>
        <form class="new_bill">
          <input type="text" name="name" placeholder="name" />
          <input type="number" name="amount" placeholder="amount" step="any" />
          <input type="date" name="arrival_date" />
          <input type="date" name="departure_date" />
          <input type="submit" value="New Bill">
        </form>
      </td>
    </tr>

  </table>
</template>

<template name="roommate">
  <div class="roommate">
    <input type="text" name="name" placeholder="name" value={{name}} data-roommateid={{_id}}>
    <input type="date" name="arrival_date" value={{arrival_date}} data-roommateid={{_id}}>
    <input type="date" name="departure_date" value={{departure_date}} data-roommateid={{_id}}>
    <input type="button" class="delete_roommate" value="delete" data-roommateid={{_id}}>
  </div>
</template>

<template name="bill">
  <div class="bill">
    <input type="text"   data-billid={{_id}} name="name"           value={{name}} placeholder="name">
    <input type="number" data-billid={{_id}} name="amount"         value={{amount}} placeholder="amount" step="any" >
    <input type="date"   data-billid={{_id}} name="arrival_date"   value={{arrival_date}}>
    <input type="date"   data-billid={{_id}} name="departure_date" value={{departure_date}}>

    <input type="button" class="delete_bill" value="delete" data-billid={{_id}} />
  </div>
</template>

